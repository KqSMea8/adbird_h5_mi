__require=function t(e,c,n){function o(a,s){if(!c[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var u="function"==typeof __require&&__require;if(!s&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}}var l=c[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,c,n)}return c[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({BlackRing:[function(t,e,c){"use strict";cc._RF.push(e,"456a9CW1CZPW41fG8FmIBO9","BlackRing"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},start:function(){},onCollisionEnter:function(t,e){if(0==t.tag){var c=new cc.Event.EventCustom("subcount",!0);this.node.dispatchEvent(c),cc.log("on collision stay")}}}),cc._RF.pop()},{}],Box:[function(t,e,c){"use strict";cc._RF.push(e,"074eavL0NRLnaplDyNPpMzi","Box"),cc.Class({extends:cc.Component,properties:{ring:{default:null,type:cc.Prefab}},onLoad:function(){},init:function(t){var e=1;if(Math.random()<.3+.05*t){var c=Math.random();e=c<.2+.01*t?3:c<.4+.04*t?4:2}else e=1;var n=360/e;this.level=t;var o=-1;Math.random()<.5&&(o=1),this.v=(Math.round(Math.random()*(50+10*Math.floor(t/5)))+20*Math.floor(t/5)+30)*o;for(var i=1;i<=e;i++){var a=n*i,s=cc.pRotateByAngle(cc.p(0,330),cc.p(0,0),a*Math.PI/180),r=cc.instantiate(this.ring);r.parent=this.node,r.setPosition(cc.p(s.x,s.y))}return this.node.rotation=360*Math.random(),this.v},start:function(){},update:function(t){this.node.rotation=this.node.rotation+t*this.v}}),cc._RF.pop()},{}],GameAdapt:[function(t,e,c){"use strict";cc._RF.push(e,"8c3acn7YrNGxLX6wk+3y7B2","GameAdapt"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.winSize.width/cc.winSize.height,e=this.node.getComponent(cc.Canvas);t<=.67?(e.fitHeight=!0,e.fitWidth=!1):t>1?(e.fitHeight=!0,e.fitWidth=!0):(e.fitWidth=!0,e.fitHeight=!1)},start:function(){}}),cc._RF.pop()},{}],GameData:[function(t,e,c){"use strict";cc._RF.push(e,"36aafMjPRdBlos4bvuQOzMx","GameData");var n=cc.Class({properties:{},ctor:function(){this.newScore=0;var t=this.getStorageData("GameCross");cc.log("GameCross"+t),null==t&&(this.setStorageData("GameCross",1),this.setStorageData("music",1),this.setStorageData("score",0))},getStorageData:function(t){return cc.sys.localStorage.getItem(t)},setStorageData:function(t,e){cc.sys.localStorage.setItem(t,e)},ChangeImage:function(t,e){cc.loader.loadRes(e,cc.SpriteFrame,function(e,c){t.getComponent(cc.Sprite).spriteFrame=c})}});n._instance=null,n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},e.exports=n,cc._RF.pop()},{}],GameManager:[function(t,e,c){"use strict";cc._RF.push(e,"4e833AmVMlNVY9/bOOYTLF4","GameManager");var n=cc.Class({ctor:function(){}});n._instance=null,n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},e.exports=n,cc._RF.pop()},{}],GameOver:[function(t,e,c){"use strict";cc._RF.push(e,"28ba1GGcYJIzLCdxN8ummyV","GameOver"),cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Label},best:{default:null,type:cc.Label},hint:{default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onClick,this)},start:function(){this.score.string=GameData.newScore;var t=parseInt(GameData.getStorageData("score"));GameData.newScore>t?(this.hint.active=!0,this.best.string=GameData.newScore,GameData.setStorageData("score",GameData.newScore)):(this.hint.active=!1,this.best.string=t),cc.log(GameData.newScore+"  score  "+t),1==GlobalData.channel&&(cc.log("QuickAds.showAfg"),QuickAds.showAfg())},redo:function(){cc.director.resume(),cc.director.loadScene("GameScene")},onSound:function(){this.sound.active=!1,this.soundclose.active=!0,GameData.setStorageData("music",0),SoundManager.stopMusic()},onSoundclose:function(){this.sound.active=!0,this.soundclose.active=!1,GameData.setStorageData("music",1),SoundManager.resumeMusic()},onClick:function(){}}),cc._RF.pop()},{}],GameRoot:[function(t,e,c){"use strict";cc._RF.push(e,"f107exZ6mtI4KvrnBce5ttb","GameRoot"),window.GlobalData={channel:1},window.isload=!1;var n=t("GameManager"),o=t("GameData");window.GameData=o.getInstance();var i=t("SoundManager");window.SoundManager=i.getInstance();var a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node),n.getInstance(),this.initScene(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},initScene:function(){cc.director.loadScene("LogoScene")},changeScene:function(t,e){cc.director.loadScene(e)},start:function(){},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyDown:function(t){switch(cc.log("onKeyDown="+t.keyCode),t.keyCode){case cc.KEY.back:if(console.log("onKeyDown"),console.log("onShowInner="+GlobalData.channel),cc.sys.OS_ANDROID==cc.sys.os)return 1==GlobalData.channel&&(console.log("onShowInner"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onShowInner","(Ljava/lang/String;)V","22725")),console.log("current platform is: cc.sys.OS_ANDROID"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitGame","()V"),!0}}});a._instance=null,a.getInstance=function(){return a._instance||(a._instance=new a),a._instance},e.exports=a,cc._RF.pop()},{GameData:"GameData",GameManager:"GameManager",SoundManager:"SoundManager"}],GameView:[function(t,e,c){"use strict";cc._RF.push(e,"25f66FaoYhIYqOMgF9pxxke","GameView"),cc.Class({extends:cc.Component,properties:{score_lable:{default:null,type:cc.Label},node_ring:{default:null,type:cc.Node},bg:{default:null,type:cc.Node},node_box:{default:null,type:cc.Node},black_ring:{default:null,type:cc.Node},heart1:{default:null,type:cc.Node},heart2:{default:null,type:cc.Node},heart3:{default:null,type:cc.Node},box:{default:null,type:cc.Prefab},GameOverView:{default:null,type:cc.Node},StopView:{default:null,type:cc.Node},spine:{default:null,type:cc.Node},bg1:{default:null,type:cc.Prefab},bg2:{default:null,type:cc.Prefab},bg3:{default:null,type:cc.Prefab},bg4:{default:null,type:cc.Prefab}},onLoad:function(){this.score=0,this.canclick=!0,this.isStart=!1,this.ring_site=0,this.count=3,this.v=40,this.sub_rate=.18,this.createBox(),this.ontouch(),this.changeBg();var t=Math.floor(4*Math.random()+1);this.color=t;var e=this.bg1;1==this.color?e=this.bg1:2==this.color?e=this.bg2:3==this.color?e=this.bg3:4==this.color&&(e=this.bg4),this.show_bg=cc.instantiate(e),this.show_bg.parent=this.bg,this.show_bg.getComponent("sp.Skeleton").setAnimation(1,"animation2",!0)},changeBg:function(){var t=Math.floor(4*Math.random()+1);t==this.color&&(1==t?t=2:4==t&&(t=3)),this.color=t;var e=this.bg1;1==this.color?e=this.bg1:2==this.color?e=this.bg2:3==this.color?e=this.bg3:4==this.color&&(e=this.bg4);var c=cc.instantiate(e);c.parent=this.bg,c.position=cc.p(0,0);var n=c.getComponent("sp.Skeleton");if(n.setAnimation(1,"animation1",!1),n.addAnimation(1,"animation2",!0),this.show_bg){var o=cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.show_bg.destroy(),this.show_bg=c},this));this.show_bg.runAction(o)}},start:function(){var t=this;this.node.on("addScore",function(e){var c=e.getUserData();t.canclick=!0,t.addScore();var n=cc.instantiate(t.boom);n.parent=t.node,n.setPosition(c)}),this.node.on("subcount",function(e){e.getUserData();t.subCount()})},ontouch:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.onClick()},this)},createBox:function(){this.node_box&&this.node_box.removeAllChildren(),this.box_list=[];for(var t=1;t<=5;t++){var e=cc.instantiate(this.box);e.parent=this.node_box,e.setPosition(cc.p(0,0)),e.scale=1-(t-1)*this.sub_rate;var c=e.getComponent("Box").init(this.score);this.box_list.push(c)}},ringMove:function(){if(1==this.ring_site){var t=cc.spawn(cc.moveTo(.1,cc.p(0,-330)),cc.scaleTo(.1,1)),e=cc.sequence(t,cc.callFunc(function(){this.v=9*this.box_list[this.ring_site-1]/10,this.canclick=!0},this));this.black_ring.runAction(e)}else if(6==this.ring_site){t=cc.spawn(cc.moveTo(.1,cc.p(0,0)),cc.scaleTo(.1,0)),e=cc.sequence(t,cc.callFunc(function(){SoundManager.playEffect("pass"),this.addScore(),this.canclick=!0,this.score%3==0&&this.changeBg(),this.spine.getComponent("sp.Skeleton").setAnimation(1,"animation",!1)},this));this.black_ring.runAction(e)}else if(this.ring_site<6){t=cc.spawn(cc.moveTo(.1,cc.p(0,-330*(1-this.sub_rate*(this.ring_site-1)))),cc.scaleTo(.1,1-.15*(this.ring_site-1))),e=cc.sequence(t,cc.callFunc(function(){this.v=9*this.box_list[this.ring_site-1]/10,this.canclick=!0},this));this.black_ring.runAction(e)}},subCount:function(){SoundManager.playEffect("dead"),this.black_ring.stopAllActions(),this.canclick=!0,this.count=this.count-1,1==this.count?(this.heart1.active=!0,this.heart2.active=!1,this.heart3.active=!1):2==this.count?(this.heart1.active=!0,this.heart2.active=!0,this.heart3.active=!1):3==this.count?(this.heart1.active=!0,this.heart2.active=!0,this.heart3.active=!0):0==this.count&&(this.heart1.active=!1,this.heart2.active=!1,this.heart3.active=!1),0==this.count?(this.black_ring.position=cc.p(0,-450),this.ring_site=0,this.node_ring.rotation=0,this.black_ring.scale=1,this.black_ring.rotation=0,this.isStart=!1,this.GameOver()):(this.black_ring.position=cc.p(0,-450),this.ring_site=0,this.node_ring.rotation=0,this.black_ring.rotation=0,this.black_ring.scale=1,this.isStart=!1)},addScore:function(){this.score=this.score+1,this.score_lable.string=this.score,this.createBox(),this.black_ring.position=cc.p(0,-450),this.ring_site=0,this.count=3,this.heart1.active=!0,this.heart2.active=!0,this.heart3.active=!0,this.node_ring.rotation=0,this.black_ring.scale=1,this.black_ring.rotation=0,this.isStart=!1},onClick:function(){this.canclick&&(0==this.isStart&&(this.isStart=!0),this.canclick=!1,this.ring_site=this.ring_site+1,this.ringMove(),SoundManager.playEffect("touch"))},spine_spineEventCallback:function(t,e,c,n,o){c==sp.AnimationEventType.EVENT&&"event"==n.data.name&&(SoundManager.playEffect("shoot"),this.createBullet())},onStop:function(){cc.director.pause(),this.StopView.active=!0},GameOver:function(){var t=cc.moveBy(.05,cc.p(10*Math.random()+10,10*Math.random()+10)),e=cc.moveBy(.05,cc.p(-(10*Math.random()+10),-(10*Math.random()+10))),c=cc.moveBy(.05,cc.p(10*Math.random()+10,10*Math.random()+10)),n=cc.moveBy(.05,cc.p(-(10*Math.random()+10),-(10*Math.random()+10))),o=cc.moveBy(.05,cc.p(0,0)),i=cc.sequence(t,e,c,n,t,e,c,n,o,cc.callFunc(function(){GameData.newScore=this.score,this.GameOverView.active=!0},this));this.node.runAction(i)},update:function(t){this.isStart&&(this.node_ring.rotation=this.node_ring.rotation+t*this.v,this.black_ring.rotation=-this.node_ring.rotation)}}),cc._RF.pop()},{}],LoadView:[function(t,e,c){"use strict";cc._RF.push(e,"0add6uUiLdAxqy9pEWx3S9B","LoadView"),cc.Class({extends:cc.Component,properties:{ring:{default:null,type:cc.Node},click_btn:{default:null,type:cc.Button},sound:{default:null,type:cc.Node},soundclose:{default:null,type:cc.Node}},onLoad:function(){this.List=["GameScene"],0==window.isload&&(this.onLoadScene(0),this.click_btn.node.setScale(0,0)),1==GameData.getStorageData("music")?(this.sound.active=!0,this.soundclose.active=!1):(this.sound.active=!1,this.soundclose.active=!0)},start:function(){this.ring.runAction(cc.repeatForever(cc.rotateBy(1,90)))},onLoadScene:function(t){var e=this;t<this.List.length?cc.director.preloadScene(this.List[t],function(){var c=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e.onLoadScene(t+1)},e));e.node.runAction(c);var n=t/(e.List.length-1);cc.log("load="+n)}):(window.isload=!0,this.click_btn.node.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(1,.9,.9).easing(cc.easeBackOut()))))},nextScene:function(){cc.director.loadScene("GameScene")},onSound:function(){this.sound.active=!1,this.soundclose.active=!0,GameData.setStorageData("music",0),SoundManager.stopMusic()},onSoundclose:function(){this.sound.active=!0,this.soundclose.active=!1,GameData.setStorageData("music",1),SoundManager.resumeMusic()}}),cc._RF.pop()},{}],LogoView:[function(t,e,c){"use strict";cc._RF.push(e,"3bceai9sspJv7vuJD7z9Mhl","LogoView"),cc.Class({extends:cc.Component,properties:{logo_spr:{default:null,type:cc.Node},hint_spr:{default:null,type:cc.Node}},onLoad:function(){this.logo_spr.opacity=0,this.hint_spr.opacity=0},start:function(){this.logo_spr.runAction(cc.sequence(cc.fadeIn(1),cc.delayTime(1),cc.fadeOut(1),cc.callFunc(function(){cc.director.loadScene("LoadScene")},this)))}}),cc._RF.pop()},{}],SoundManager:[function(t,e,c){"use strict";cc._RF.push(e,"5683bDMim9PBI159P6la5LU","SoundManager");var n=t("GameData"),o=cc.Class({extends:cc.Component,properties:{},ctor:function(){},playMusic:function(t){1==n.getInstance().getStorageData("music")&&cc.loader.load(cc.url.raw("resources/sound/"+t+".mp3"),function(t,e){cc.audioEngine.playMusic(e,!0)})},playEffect:function(t){1==n.getInstance().getStorageData("music")&&cc.loader.load(cc.url.raw("resources/sound/"+t+".mp3"),function(t,e){cc.audioEngine.play(e,!1,5)})},stopMusic:function(){cc.audioEngine.stopAll()},resumeMusic:function(){cc.audioEngine.resumeAll(),n.getInstance().getStorageData("music")}});o._instance=null,o.getInstance=function(){return o._instance||(o._instance=new o),o._instance},e.exports=o,cc._RF.pop()},{GameData:"GameData"}],StopView:[function(t,e,c){"use strict";cc._RF.push(e,"e8de1K/Sm5IkrTgKCArUhrt","StopView"),cc.Class({extends:cc.Component,properties:{sound:{default:null,type:cc.Node},soundclose:{default:null,type:cc.Node}},onLoad:function(){cc.log("stop"),this.node.on(cc.Node.EventType.TOUCH_START,this.onClick,this),1==GameData.getStorageData("music")?(this.sound.active=!0,this.soundclose.active=!1):(this.sound.active=!1,this.soundclose.active=!0)},start:function(){},onGo:function(){cc.director.resume(),this.node.active=!1},onback:function(){cc.director.resume(),cc.director.loadScene("LoadScene")},onSound:function(){this.sound.active=!1,this.soundclose.active=!0,GameData.setStorageData("music",0),SoundManager.stopMusic()},onSoundclose:function(){this.sound.active=!0,this.soundclose.active=!1,GameData.setStorageData("music",1),SoundManager.resumeMusic()},onClick:function(){}}),cc._RF.pop()},{}]},{},["GameAdapt","GameData","GameManager","GameRoot","BlackRing","Box","GameOver","GameView","StopView","LoadView","LogoView","SoundManager"]);